version: '0.9'
emailToList: "janeth@wso2.com"
infrastructureConfig:
  iacProvider: CLOUDFORMATION
  infrastructureProvider: AWS
  containerOrchestrationEngine: None
  includes:
    - Ubuntu-18.04
#     - CentOS-7.5
#     - SUSE-Linux-12
    - MySQL-5.7
#    - Oracle-SE2-12.1
#    - SQLServer-SE-14.00
#    - Postgres-10.5
    - OPEN_JDK8
  provisioners:
    - name: single-node-deployment
      remoteRepository: "git@github.com:janethavi/performance-apim.git"
      remoteBranch: "master"
      description: Provision Infra for running perf tests
      scripts:
        - name: 'wso2-perf-apim-build'
          description: ''
          type: SHELL
          file: distribution/scripts/build.sh
        - name: 'prod-wso2-apim-scenario-deployment'
          description: ''
          type: SHELL
          file: distribution/target/cloudformation/run-performance-test.sh
          inputParameters:
            user_email: janeth@wso2.com
            user_access_key: AKIA3Y6K3UQFV6JSMB6I
            user_secret_access_key: 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
            key_name: janeth-key
            stack_name_prefix: "wso2-apim-test-"
            s3_bucket_name: performance-test-archives
            s3_bucket_region: "us-east-2"
            jmeter_client_ec2: t3.micro
            netty_ec2: t3.micro
            wso2am_ec2: t3.small
            rds_ec2: db.t3.micro
scenarioConfigs:
  - testType: TESTNG
    remoteRepository: "git@github.com:janethavi/performance-apim.git"
    name: "apim-perf-test-scenarios"
    description: "apim-scenarios"
    file: distribution/target/cloudformation/perform-test.sh
    inputParameters:
      heap_memory_app: 1G
      con_users: 100
      con_users: 200
      msg_size: 50
      msg_size: 1024
      backend_sleep: 0
      test_duration: 120
      warmup_time: 60
      heap_memory_jmeter_s: 512M
      heap_memory_jmeter_c: 512M
      heap_memory_netty: 515M

